@{
    ViewBag.Title = "Home Page";
}





<head>
    <link rel="stylesheet" href="~/Content/makeMeisterStyles.css" />
</head>



<style type="text/css">

    
    label.error {
        color: red;
        font-size: 12px;
    }

    .btn-primary {
        margin-top: 5px;
    }

    #registrar {
        font-size: 14px;
        margin-top: 10px;
    }

    #log_in {
        margin-top: 20px;
    }
</style>







<div class="login-container">

   

        <form id="form1">
            <!--id="form1" method="post" action="api/updates/complex" enctype="application/x-www-form-urlencoded"-->

            <div class="jumbotron" id="log_in">
                <h2 class="top-left ml-2 md-2" id="header_color">Iniciar Sesión</h2>
                <p class="lead ml-2 md-2" id="sub_theme">
                    Si ya eres socio Airline Plus ingresa con tus datos de siempre
                </p>



                <div class="row">
                    <div class="col-md-6">
                        <label>Email</label>

                    </div>
                    <div class="col-md-6">
                        <input type="text" class="form-control" id="userEmail" name="userEmail" placeholder="email Usuario">
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>Contraseña</label>
                    </div>
                    <div class="col-md-6">
                        <input type="password" class="form-control" id="userPassword" name="userPassword" placeholder="contraseña Usuario">
                    </div>
                </div>


                <div class="row no-gutters">
                    <div class="col-md-6">

                        <label id="registrar">¿No está registrado? haz click</label>
                        <div>@Html.ActionLink("aqui", "RegisterCustomer", "Home")</div>  
                    </div>
                    <div class="col-md-6">
                        <div class="row  flex-row-reverse no-gutters">
                            <button type="button" class="btn btn-primary" id="LoginButton" value="LoginUser">Iniciar Sesión</button>

                        </div>

                    </div>

                </div>











            </div>
        </form>

    
</div>



<script>
    $(document).ready(function () {


        ValidateForm();

        $("#form1").validate({

            rules: {
                userEmail: {
                    required: true,
                    email: true,
                },
                userPassword: {
                    required: true,
                },

            }
        });




        $('#LoginButton').click(function () {

/*
            $.post("https://localhost:44350/api/Login", {
                Email: $("#userEmail").val(),
                Contrasenia: $("#userPassword").val()
            },


                function (data, status) {
                    if (status == "success") {


                        alert("LOGIN EXITOSO\n " + data.Email + " " + data.ID);
                        getUserInfo(data);
                    }

                });
*/
            var newUrl = "https://localhost:44350/api/Login";

            $.ajax({

                type: "POST",
                url: newUrl,
                dataType: "json",
                data: {
                    Email: $("#userEmail").val(),
                    Contrasenia: $("#userPassword").val()
                },
                success: function (result) {
                    alert("LOGIN EXITOSO\n " + result.Email + " " + result.ID);
                },
                error: function (result) {
                    
                    alert("ERROOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOR " + result);
                    console.log('Login Fail!!!');
                    console.log(result.Email + result.Contrasenia);
                }
            });
        });

    });    
    

</script>


